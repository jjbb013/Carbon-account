name: è¿è¡Œæ‰€æœ‰è„šæœ¬

on:
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘æ­¤å·¥ä½œæµ

jobs:
  run-all-scripts:
    runs-on: ubuntu-latest
    steps:
      # ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œç­¾åˆ°ä»»åŠ¡ï¼ˆæœ€ä¼˜å…ˆï¼‰
      - name: è§¦å‘ç­¾åˆ°ä»»åŠ¡
        uses: actions/github-script@v6
        with:
          script: |
            try {
              await github.rest.actions.createWorkflowDispatch({
                owner: context.repo.owner,
                repo: context.repo.repo,
                workflow_id: 'ç­¾åˆ°.yml',
                ref: '${{ github.ref }}'
              });
              console.log('âœ… ç­¾åˆ°ä»»åŠ¡è§¦å‘æˆåŠŸ');
            } catch (error) {
              console.error('âŒ è§¦å‘ç­¾åˆ°ä»»åŠ¡å¤±è´¥:', error.message);
              core.setFailed('ç­¾åˆ°ä»»åŠ¡è§¦å‘å¤±è´¥');
            }
          github-token: ${{ secrets.GH_TOKEN }}
      
      # ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œç­”é¢˜éª‘è½¦å›æ”¶ä»»åŠ¡ï¼ˆç­¾åˆ°åï¼‰
      - name: è§¦å‘ç­”é¢˜éª‘è½¦å›æ”¶ä»»åŠ¡
        uses: actions/github-script@v6
        with:
          script: |
            try {
              await new Promise(resolve => setTimeout(resolve, 5000)); // ç­‰å¾…5ç§’
              await github.rest.actions.createWorkflowDispatch({
                owner: context.repo.owner,
                repo: context.repo.repo,
                workflow_id: 'ç­”é¢˜éª‘è½¦å›æ”¶3in1.yml',
                ref: '${{ github.ref }}'
              });
              console.log('âœ… ç­”é¢˜éª‘è½¦å›æ”¶ä»»åŠ¡è§¦å‘æˆåŠŸ');
            } catch (error) {
              console.error('âŒ è§¦å‘ç­”é¢˜éª‘è½¦å›æ”¶ä»»åŠ¡å¤±è´¥:', error.message);
              core.setFailed('ç­”é¢˜éª‘è½¦å›æ”¶ä»»åŠ¡è§¦å‘å¤±è´¥');
            }
          github-token: ${{ secrets.GITHUB_TOKEN }}
      
      # ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œçˆ¬æ¥¼ä»»åŠ¡ï¼ˆæœ€åï¼‰
      - name: è§¦å‘çˆ¬æ¥¼ä»»åŠ¡
        uses: actions/github-script@v6
        with:
          script: |
            try {
              await new Promise(resolve => setTimeout(resolve, 10000)); // ç­‰å¾…10ç§’
              await github.rest.actions.createWorkflowDispatch({
                owner: context.repo.owner,
                repo: context.repo.repo,
                workflow_id: 'çˆ¬æ¥¼.yml',
                ref: '${{ github.ref }}'
              });
              console.log('âœ… çˆ¬æ¥¼ä»»åŠ¡è§¦å‘æˆåŠŸ');
            } catch (error) {
              console.error('âŒ è§¦å‘çˆ¬æ¥¼ä»»åŠ¡å¤±è´¥:', error.message);
              core.setFailed('çˆ¬æ¥¼ä»»åŠ¡è§¦å‘å¤±è´¥');
            }
          github-token: ${{ secrets.GITHUB_TOKEN }}
      
      # æœ€ç»ˆæ­¥éª¤ï¼šæ˜¾ç¤ºå®Œæˆä¿¡æ¯
      - name: å®Œæˆæç¤º
        run: |
          echo "ğŸ‰ æ‰€æœ‰è„šæœ¬å·²æˆåŠŸè§¦å‘ï¼"
          echo "è¯·æ£€æŸ¥å„å·¥ä½œæµè¿è¡ŒçŠ¶æ€"
          echo "1. ç­¾åˆ°ä»»åŠ¡: https://github.com/${{ github.repository }}/actions/workflows/ç­¾åˆ°.yml"
          echo "2. ç­”é¢˜éª‘è½¦å›æ”¶ä»»åŠ¡: https://github.com/${{ github.repository }}/actions/workflows/ç­”é¢˜éª‘è½¦å›æ”¶3in1.yml"
          echo "3. çˆ¬æ¥¼ä»»åŠ¡: https://github.com/${{ github.repository }}/actions/workflows/çˆ¬æ¥¼.yml"
        if: always()  # æ— è®ºå‰é¢æ­¥éª¤æ˜¯å¦å¤±è´¥éƒ½æ‰§è¡Œ
